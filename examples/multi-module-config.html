<!DOCTYPE html>


<!--
 | Generated by Apache Maven Doxia Site Renderer 1.11.1 from src/site/apt/examples/multi-module-config.apt.vm at 2024-03-09
 | Rendered using Apache Maven Fluido Skin 1.12.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 1.11.1" />
    <meta name="author" content="2008-05-22" />
    <title>SpotBugs Maven Plugin &#x2013; Multimodule Configuration</title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-1.12.0.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />
    <script src="../js/apache-maven-fluido-1.12.0.min.js"></script>
  </head>
  <body>
    <a class="github-fork-ribbon right-top" href="https://github.com/spotbugs/spotbugs-maven-plugin" data-ribbon="Fork me on GitHub" title="Fork me on GitHub">Fork me on GitHub</a>
    <div class="container-fluid container-fluid-top">
      <header>
        <div id="banner">
          <div class="pull-left"><div id="bannerLeft"><h1>SpotBugs Maven Plugin</h1>
</div>
</div>
          <div class="pull-right"></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
      <li><a href="../index.html" title="SpotBugs Maven Plugin">SpotBugs Maven Plugin</a><span class="divider">»</span></li>
    <li class="active ">Multimodule Configuration</li>
        <li id="publishDate" class="pull-right"><span class="divider">|</span> Last Published: 2024-03-09</li>
          <li id="projectVersion" class="pull-right"><span class="divider">|</span>Version: 4.8.3.2-SNAPSHOT</li>
        <li class="pull-right"><a href="https://github.com/spotbugs/" class="externalLink" title="SpotBugs">SpotBugs</a></li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">Overview</li>
    <li><a href="../index.html" title="Introduction"><span class="none"></span>Introduction</a></li>
    <li><a href="../gapidocs/index.html" title="Groovydoc"><span class="none"></span>Groovydoc</a></li>
    <li><a href="../plugin-info.html" title="Goals"><span class="none"></span>Goals</a></li>
    <li><a href="../usage.html" title="Usage"><span class="none"></span>Usage</a></li>
    <li><a href="../faq.html" title="FAQ"><span class="none"></span>FAQ</a></li>
   <li class="nav-header">Examples</li>
    <li><a href="../examples/spotbugs.html" title="Sample Report"><span class="none"></span>Sample Report</a></li>
    <li><a href="../examples/spotbugs.xml" title="Sample XML xdoc Report"><span class="none"></span>Sample XML xdoc Report</a></li>
    <li><a href="../examples/spotbugsXml.xml" title="Sample Legacy XML Report"><span class="none"></span>Sample Legacy XML Report</a></li>
    <li class="active"><a><span class="none"></span>Multi-Module Configuration</a></li>
    <li><a href="../examples/violationChecking.html" title="Violation Checking Configuration"><span class="none"></span>Violation Checking Configuration</a></li>
   <li class="nav-header">Project Documentation</li>
    <li><a href="../project-info.html" title="Project Information"><span class="icon-chevron-right"></span>Project Information</a></li>
    <li><a href="../project-reports.html" title="Project Reports"><span class="icon-chevron-right"></span>Project Reports</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
<a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="../images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn"  class="span10" >
<section>
<h2><a name="Multimodule_Configuration"></a>Multimodule Configuration</h2>
<p><b>Note:</b> This implemented in version 2.0 of the Spotbugs plugin.</p>
<p><b>Credit:</b> This is a shameless plagiarization of the Checkstyle plugin for consistency and due to my laziness.</p>
<p>Configuring the Spotbugs plugin for use within large multimodule projects can be done, but it requires a little setup.</p>
<p>This example will use a mysterious project called <i>whizbang</i>. This is what the structure of that project looks like:</p>
<div class="source"><pre class="prettyprint">whizbang
|-- pom.xml
|-- core
|   `-- pom.xml
|-- gui
|   `-- pom.xml
|-- jmx
|   `-- pom.xml
`-- src</pre></div><section>
<h3><a name="Create_a_subproject_to_house_the_resources"></a>Create a subproject to house the resources</h3>
<p>We'll start by adding another sub project that will house our common configuration. Let's call it <i>build-tools</i>. In it we put the resources that we want to include. In this example, we will add configuration files for the Spotbugs plugin. Configuration files for other plugins, like the PMD and Checkstyle plugin, can be included in the same subproject if you like. We will create another directory and call it <i>whiz-progs</i> and create a pom.xml file. We will move our core, gui, and jmx modules to <i>whiz-progs</i>.</p>
<div class="source"><pre class="prettyprint">whizbang
|-- pom.xml
|-- build-tools
|   |-- src
|   |   `-- main
|   |       `-- resources
|   |           `-- whizbang
|   |               |-- checkstyle.xml
|   |               |-- lib-filter.xml
|   |               `-- LICENSE.TXT
|   `-- pom.xml
|`-- src
|
`-- whiz-progs
    |-- pom.xml
    |-- core
    |-- gui
    `-- jmx</pre></div>
<p><b>Tip:</b> put the resources into a subdirectory that you can ensure will be unique and not conflict with anyone else.</p></section><section>
<h3><a name="Configure_the_top_level_pom"></a>Configure the top level pom </h3>
<p>The top level pom jusr references the two modules</p>
<div class="source"><pre class="prettyprint">&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;
  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
  &lt;groupId&gt;com.example.whizbang&lt;/groupId&gt;
  &lt;artifactId&gt;whizbang-parent&lt;/artifactId&gt;
  &lt;version&gt;1.0&lt;/version&gt;
  &lt;packaging&gt;pom&lt;/packaging&gt;
  &lt;name&gt;WhizBang Parent&lt;/name&gt;
  &lt;modules&gt;
    &lt;module&gt;build-tools&lt;/module&gt;
    &lt;module&gt;modules&lt;/module&gt;
  &lt;/modules&gt;
&lt;/project&gt;</pre></div></section><section>
<h3><a name="Configure_the_other_projects_to_build-tools"></a>Configure the other projects to build-tools</h3>
<p>Now we can include the Spotbugs configuration in the whiz-progs <code>pom.xml</code>.</p>
<div class="source"><pre class="prettyprint">&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;
  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
  &lt;parent&gt;
    &lt;groupId&gt;com.example.whizbang&lt;/groupId&gt;
    &lt;artifactId&gt;whizbang-parent&lt;/artifactId&gt;
    &lt;version&gt;1.0&lt;/version&gt;
    &lt;relativePath&gt;../pom.xml&lt;/relativePath&gt;
  &lt;/parent&gt;
  &lt;packaging&gt;pom&lt;/packaging&gt;
    &lt;artifactId&gt;whiz-progs&lt;/artifactId&gt;
  &lt;name&gt;WhizBang Programs&lt;/name&gt;
  &lt;build&gt;
    &lt;extensions&gt;
      &lt;extension&gt;
        &lt;groupId&gt;com.example.whizbang&lt;/groupId&gt;
        &lt;artifactId&gt;build-tools&lt;/artifactId&gt;
        &lt;version&gt;1.0&lt;/version&gt;
      &lt;/extension&gt;
    &lt;/extensions&gt;
  &lt;/build&gt;
  &lt;reporting&gt;
    &lt;plugins&gt;
      &lt;plugin&gt;
        &lt;groupId&gt;com.github.spotbugs&lt;/groupId&gt;
        &lt;artifactId&gt;spotbugs-maven-plugin&lt;/artifactId&gt;
        &lt;version&gt;4.8.3.2-SNAPSHOT&lt;/version&gt;
        &lt;configuration&gt;
          &lt;effort&gt;Max&lt;/effort&gt;
          &lt;threshold&gt;Low&lt;/threshold&gt;
          &lt;includeFilterFile&gt;whizbang/lib-filter.xml&lt;/includeFilterFile&gt;
        &lt;/configuration&gt;
      &lt;/plugin&gt;
    &lt;/plugins&gt;
  &lt;/reporting&gt;
  &lt;modules&gt;
    &lt;module&gt;core&lt;/module&gt;
    &lt;module&gt;jmx&lt;/module&gt;
    &lt;module&gt;gui&lt;/module&gt;
  &lt;/modules&gt;
&lt;/project&gt;</pre></div>
<p>Once you are done with that, ensure that you do not include spotbugs-maven-plugin in your sub modules, as their definition and configuration, will override the top level parent pom's definition.</p>
<p>Based on the Spotbugs plugin configuration above, the values of <code>includeFilterFile</code> will be resolved from the classpath. The <i>build-tools</i> jar was included in the classpath when it was declared as an dependency to the plugin.</p>
<p><b>Note:</b> For the classpath reference, the build-tools was referred to as an extension and not as a plugin dependency. This is due to the fact that if it is declared as a plugin dependency, Maven will not download it from the internal repository and would just look for it in ibiblio.</p>
<p>Lastly, kick off a build of the site.</p>
<div class="source"><pre class="prettyprint">mvn site</pre></div>
<p>Every sub project will now use the same Spotbugs setup and configuration.</p></section></section>
        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>©      2005–2024
<a href="https://spotbugs.github.io/">Spotbugs</a>
</p>
        </div>
      </div>
    </footer>
<script>
  if(anchors) {
    anchors.add();
  }
</script>
  </body>
</html>
